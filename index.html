<!DOCTYPE html><html lang="zh-CN"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1.0">    <title>çº¢åˆ©ä½æ³¢æŒ‡æ•° - è‚¡æ¯ç‡åˆ†æ</title>    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>    <style>        * {            margin: 0;            padding: 0;            box-sizing: border-box;        }                body {            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', sans-serif;            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);            min-height: 100vh;            padding: 20px;        }                .container {            max-width: 1200px;            margin: 0 auto;            background: white;            border-radius: 16px;            box-shadow: 0 20px 60px rgba(0,0,0,0.3);            overflow: hidden;        }                header {            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);            color: white;            padding: 30px;            text-align: center;        }                header h1 {            font-size: 2rem;            margin-bottom: 10px;        }                header p {            font-size: 1rem;            opacity: 0.9;        }                .content {            padding: 30px;        }                .data-source {            background: #f8f9fa;            padding: 20px;            border-radius: 8px;            margin-bottom: 30px;        }                .data-source h3 {            margin-bottom: 15px;            color: #333;        }                .input-group {            display: flex;            gap: 10px;            margin-bottom: 10px;        }                .input-group input {            flex: 1;            padding: 12px;            border: 2px solid #ddd;            border-radius: 6px;            font-size: 14px;            transition: border-color 0.3s;        }                .input-group input:focus {            outline: none;            border-color: #667eea;        }                .input-group button {            padding: 12px 30px;            background: #667eea;            color: white;            border: none;            border-radius: 6px;            cursor: pointer;            font-size: 14px;            font-weight: 600;            transition: all 0.3s;        }                .input-group button:hover {            background: #5568d3;            transform: translateY(-2px);            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);        }                .data-source p {            color: #666;            font-size: 13px;            line-height: 1.6;        }                .chart-section {            margin-bottom: 30px;        }                .chart-section h3 {            margin-bottom: 20px;            color: #333;            font-size: 1.5rem;        }                .chart-container {            position: relative;            height: 400px;            margin-bottom: 30px;        }                .table-container {            overflow-x: auto;            margin-top: 20px;        }                table {            width: 100%;            border-collapse: collapse;            background: white;        }                th, td {            padding: 12px;            text-align: left;            border-bottom: 1px solid #eee;        }                th {            background: #f8f9fa;            font-weight: 600;            color: #333;        }                tr:hover {            background: #f8f9fa;        }                .status {            padding: 15px;            border-radius: 6px;            margin-bottom: 20px;            display: none;        }                .status.success {            background: #d4edda;            color: #155724;            border: 1px solid #c3e6cb;        }                .status.error {            background: #f8d7da;            color: #721c24;            border: 1px solid #f5c6cb;        }                .status.info {            background: #d1ecf1;            color: #0c5460;            border: 1px solid #bee5eb;        }                .loading {            text-align: center;            padding: 40px;            display: none;        }                .loading-spinner {            border: 4px solid #f3f3f3;            border-top: 4px solid #667eea;            border-radius: 50%;            width: 40px;            height: 40px;            animation: spin 1s linear infinite;            margin: 0 auto 15px;        }                @keyframes spin {            0% { transform: rotate(0deg); }            100% { transform: rotate(360deg); }        }                /* ç§»åŠ¨ç«¯é€‚é… */        @media (max-width: 768px) {            body {                padding: 10px;            }                        header h1 {                font-size: 1.5rem;            }                        header p {                font-size: 0.9rem;            }                        .content {                padding: 20px;            }                        .chart-container {                height: 300px;            }                        .input-group {                flex-direction: column;            }                        .input-group button {                width: 100%;            }                        th, td {                padding: 8px;                font-size: 13px;            }        }    </style></head><body>    <div class="container">        <header>            <h1>ğŸ“ˆ çº¢åˆ©ä½æ³¢æŒ‡æ•°è‚¡æ¯ç‡åˆ†æ</h1>            <p>Dividend Low Volatility Index - TTM Yield Analysis</p>        </header>                <div class="content">            <div class="data-source">                <h3>ğŸ“Š æ•°æ®æºé…ç½®</h3>                <div class="input-group">                    <input type="text" id="dataUrl" placeholder="è¯·è¾“å…¥æ•°æ®æºURLï¼ˆJSONæˆ–CSVæ ¼å¼ï¼Œéœ€æ”¯æŒCORSï¼‰">                    <button onclick="loadData()">åŠ è½½æ•°æ®</button>button>                </div>div>                <p>                    <strong>æ•°æ®æ ¼å¼è¦æ±‚ï¼š</strong><br>                    â€¢ JSON: <code>{"dates": ["2024-01-01", ...], "yields": [3.5, ...]}</code><br>                    â€¢ CSV: <code>date,yield\n2024-01-01,3.5\n...</code><br>                    â€¢ æ•°æ®æºå¿…é¡»æ”¯æŒCORSæˆ–æä¾›å…¬å¼€è®¿é—®æƒé™<br>                    â€¢ å»ºè®®ä½¿ç”¨ GitHub Gistã€Pastebin æˆ–å…¶ä»–æ”¯æŒCORSçš„å…¬å…±æ•°æ®æœåŠ¡                </p>            </div>div>                        <div class="status" id="status"></div>div>            <div class="loading" id="loading">                <div class="loading-spinner"></div>div>                <p>æ­£åœ¨åŠ è½½æ•°æ®...</p>            </div>div>                        <div class="chart-section" id="chartSection" style="display:none;">                <h3>ğŸ“‰ TTMè‚¡æ¯ç‡èµ°åŠ¿å›¾</h3>                <div class="chart-container">                    <canvas id="yieldChart"></canvas>canvas>                </div>div>                                <div class="table-container">                    <h3>ğŸ“‹ è¯¦ç»†æ•°æ®</h3>                    <table id="dataTable">                        <thead>                            <tr>                                <th>æ—¥æœŸ</th>                                <th>TTMè‚¡æ¯ç‡ (%)</th>                                <th>å˜åŒ–</th>                            </tr>                        </thead>                        <tbody id="tableBody">                        </tbody>tbody>                    </table>table>                </div>div>            </div>div>        </div>div>    </div>div>    <script>        let chart = null;                // æ˜¾ç¤ºçŠ¶æ€æ¶ˆæ¯        function showStatus(message, type = 'info') {            const statusEl = document.getElementById('status');            statusEl.textContent = message;            statusEl.className = 'status ' + type;            statusEl.style.display = 'block';                        setTimeout(() => {                statusEl.style.display = 'none';            }, 5000);        }                // æ˜¾ç¤º/éšè—åŠ è½½åŠ¨ç”»        function setLoading(isLoading) {            document.getElementById('loading').style.display = isLoading ? 'block' : 'none';        }                // è§£æCSVæ•°æ®        function parseCSV(text) {            const lines = text.trim().split('\n');            const headers = lines[0].toLowerCase().split(',').map(h => h.trim());            const dateIndex = headers.findIndex(h => h.includes('date') || h === 'æ—¥æœŸ');            const yieldIndex = headers.findIndex(h => h.includes('yield') || h.includes('è‚¡æ¯ç‡'));                        if (dateIndex === -1 || yieldIndex === -1) {                throw new Error('CSVæ ¼å¼ä¸æ­£ç¡®ï¼šéœ€è¦åŒ…å« date å’Œ yield åˆ—');            }                        const dates = [];            const yields = [];                        for (let i = 1; i < lines.length; i++) {                const values = lines[i].split(',').map(v => v.trim());                if (values.length > 1) {                    dates.push(values[dateIndex]);                    yields.push(parseFloat(values[yieldIndex]));                }            }                        return { dates, yields };        }                // åŠ è½½æ•°æ®        async function loadData() {            const url = document.getElementById('dataUrl').value.trim();                        if (!url) {                showStatus('è¯·è¾“å…¥æ•°æ®æºURL', 'error');                return;            }                        setLoading(true);                        try {                const response = await fetch(url);                                if (!response.ok) {                    throw new Error(`HTTPé”™è¯¯: ${response.status}`);                }                                const contentType = response.headers.get('content-type');                let data;                                if (contentType && contentType.includes('application/json')) {                    data = await response.json();                } else {                    const text = await response.text();                    data = parseCSV(text);                }                                if (!data.dates || !data.yields || data.dates.length === 0) {                    throw new Error('æ•°æ®æ ¼å¼ä¸æ­£ç¡®æˆ–æ•°æ®ä¸ºç©º');                }                                // åªå–æœ€è¿‘15å¤©                const recentDates = data.dates.slice(-15);                const recentYields = data.yields.slice(-15);                                renderChart(recentDates, recentYields);                renderTable(recentDates, recentYields);                                document.getElementById('chartSection').style.display = 'block';                showStatus('æ•°æ®åŠ è½½æˆåŠŸï¼', 'success');                            } catch (error) {                console.error('æ•°æ®åŠ è½½å¤±è´¥:', error);                                let errorMsg = 'æ•°æ®åŠ è½½å¤±è´¥: ' + error.message;                                if (error.message.includes('Failed to fetch') || error.message.includes('NetworkError')) {                    errorMsg += '\n\nå¯èƒ½çš„åŸå› ï¼š\n1. æ•°æ®æºä¸æ”¯æŒCORSï¼ˆè·¨åŸŸè¯·æ±‚ï¼‰\n2. URLåœ°å€æ— æ•ˆæˆ–ç½‘ç»œè¿æ¥é—®é¢˜\n3. æ•°æ®æºæœåŠ¡å™¨æš‚æ—¶ä¸å¯ç”¨\n\nå»ºè®®ï¼šä½¿ç”¨æ”¯æŒCORSçš„å…¬å…±æ•°æ®æœåŠ¡ï¼ˆå¦‚GitHub Gistã€jsDelivrç­‰ï¼‰';                }                                showStatus(errorMsg, 'error');                loadDemoData(); // åŠ è½½æ¼”ç¤ºæ•°æ®            } finally {                setLoading(false);            }        }                // æ¸²æŸ“å›¾è¡¨        function renderChart(dates, yields) {            const ctx = document.getElementById('yieldChart').getContext('2d');                        if (chart) {                chart.destroy();            }                        chart = new Chart(ctx, {                type: 'line',                data: {                    labels: dates,                    datasets: [{                        label: 'TTMè‚¡æ¯ç‡ (%)',                        data: yields,                        borderColor: '#667eea',                        backgroundColor: 'rgba(102, 126, 234, 0.1)',                        borderWidth: 3,                        fill: true,                        tension: 0.4,                        pointRadius: 5,                        pointHoverRadius: 7,                        pointBackgroundColor: '#667eea',                        pointBorderColor: '#fff',                        pointBorderWidth: 2                    }]                },                options: {                    responsive: true,                    maintainAspectRatio: false,                    plugins: {                        legend: {                            display: true,                            position: 'top'                        },                        tooltip: {                            backgroundColor: 'rgba(0,0,0,0.8)',                            padding: 12,                            titleFont: { size: 14 },                            bodyFont: { size: 13 },                            callbacks: {                                label: function(context) {                                    return 'è‚¡æ¯ç‡: ' + context.parsed.y.toFixed(2) + '%';                                }                            }                        }                    },                    scales: {                        y: {                            beginAtZero: false,                            ticks: {                                callback: function(value) {                                    return value.toFixed(2) + '%';                                }                            },                            grid: {                                color: 'rgba(0,0,0,0.05)'                            }                        },                        x: {                            grid: {                                display: false                            }                        }                    }                }            });        }                // æ¸²æŸ“è¡¨æ ¼        function renderTable(dates, yields) {            const tbody = document.getElementById('tableBody');            tbody.innerHTML = '';                        for (let i = 0; i < dates.length; i++) {                const row = tbody.insertRow();                const change = i > 0 ? yields[i] - yields[i-1] : 0;                const changeSymbol = change > 0 ? 'â†‘' : change < 0 ? 'â†“' : 'â†’';                const changeColor = change > 0 ? 'green' : change < 0 ? 'red' : 'gray';                                row.innerHTML = `                    <td>${dates[i]}</td>                    <td><strong>${yields[i].toFixed(2)}%</strong></td>                    <td style="color: ${changeColor}">                        ${changeSymbol} ${Math.abs(change).toFixed(2)}%                    </td>                `;            }        }                // åŠ è½½æ¼”ç¤ºæ•°æ®        function loadDemoData() {            const today = new Date();            const dates = [];            const yields = [];                        for (let i = 14; i >= 0; i--) {                const date = new Date(today);                date.setDate(date.getDate() - i);                dates.push(date.toISOString().split('T')[0]);                                // ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®ï¼šåŸºç¡€å€¼3.5% Â± éšæœºæ³¢åŠ¨                const baseYield = 3.5;                const randomVariation = (Math.random() - 0.5) * 0.3;                yields.push(baseYield + randomVariation);            }                        renderChart(dates, yields);            renderTable(dates, yields);                        document.getElementById('chartSection').style.display = 'block';            showStatus('å·²åŠ è½½æ¼”ç¤ºæ•°æ®ï¼ˆæ¨¡æ‹Ÿï¼‰', 'info');        }                // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨åŠ è½½æ¼”ç¤ºæ•°æ®        window.addEventListener('load', () => {            loadDemoData();        });    </script></body></html>html></script></th></th></tr></thead></p></code></code></strong></p></p></h1></header></body></style></title></head>Page_DownPage_DownPage_Down
